DEBUG    mytest:GraphqlClient.py:34 http://192.168.1.175:8888/graphql/?createThingMaintenance
DEBUG    mytest:GraphqlClient.py:35 {'Content-Type': 'application/json', 'authorization': 'Token eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJjcmVkZW50aWFscyI6eyJlbXBsb3llZV9pZCI6MSwiaXNfYWRtaW5fIjp0cnVlfSwidXNlciI6eyJpZCI6MSwiY29tcGFueV9pZCI6MSwibmFtZSI6Ilx1N2JhMVx1NzQwNlx1NTQ1OCIsImRlcGFydG1lbnRfaWQiOjEsImNvZGUiOm51bGwsInBob25lIjpudWxsLCJqb2IiOm51bGwsImVtYWlsIjpudWxsLCJhY2NvdW50IjoiYWRtaW4iLCJzdGF0dXMiOiJBQ1RJVkFURUQiLCJyb2xlcyI6bnVsbH0sImV4cCI6MTYwMDMzMzI3NH0.GrQGvQcLNjAI91CPz-s0kH0-0dXEDfbUx7I4IzuHmhE'}
DEBUG    mytest:GraphqlClient.py:36 {
  'input': {
    'maintainer': {
      'id': 1,
    },
    'period': {
      'startAt': 1600247027696,
      'type': 'SINGLE',
    },
    'rule': {
      'id': 1,
    },
    'thing': {
      'id': 1,
    },
  },
}

DEBUG    mytest:GraphqlClient.py:39 {
  'data': {
    'createThingMaintenance': {
      '__typename': 'ThingMaintenance',
      'addition': '[]',
      'code': 'BY202009160046',
      'endAt': None,
      'id': '46',
      'images': None,
      'laborCosts': None,
      'maintainer': {
        '__typename': 'Employee',
        'account': 'admin',
        'code': None,
        'department': {
          '__typename': 'Department',
          'headcount': 9,
          'id': '1',
          'name': '喜临门家具股份有限公司',
          'parentPath': [],
          'subsidiaries': [],
        },
        'email': None,
        'id': '1',
        'job': None,
        'name': '管理员',
        'phone': None,
        'roles': [
          {'id': '1', 'name': '负责人', 'permissions':...(len=170),
        ],
        'status': 'ACTIVATED',
      },
      'materialCosts': None,
      'otherCosts': None,
      'period': {
        '__typename': 'Period',
        'endAt': None,
        'frequency': None,
        'startAt': 1600247027696,
        'type': 'SINGLE',
      },
      'remarks': None,
      'result': '',
      'resultHistory': [],
      'rule': {
        '__typename': 'ThingMaintenanceRule',
        'addition': '[{"key": "52ffaba0143348f4a7950cd1ab8a34a8", "value":
                     "\\u5355\\u884c\\u6587\\u5b57_mwsd3"}]',
        'code': 'BYFA202009160001',
        'frequency': 'frequency_747je',
        'id': '1',
        'items': [
          {'id': '31dcf6b1-72b0-4a91-a135-0876d6d5317e',...(len=134),
          {'id': '8974129a-a0a3-4f22-b3ee-a282b5d71ff7',...(len=134),
          {'id': '259c6e5f-8606-4fcf-832f-1cd2b8b35f93',...(len=134),
        ],
        'level': '二级保养',
        'name': 'name_fwttg',
        'updatedAt': 1600221631010,
      },
      'sparePartCosts': None,
      'startAt': 1600247027696,
      'status': 'PENDING',
      'thing': {
        '__typename': 'Thing',
        'activatedAt': None,
        'addition': None,
        'attachments': None,
        'brand': '1',
        'category': '1',
        'code': 'code_lcdhm',
        'contact': None,
        'depreciationRate': None,
        'desc': None,
        'distributor': None,
        'factory': '1',
        'id': '1',
        'images': None,
        'location': None,
        'manufacturer': None,
        'model': 'model_z6aw5',
        'name': 'name_pz0bx',
        'phone': None,
        'purchasedAt': None,
        'purchasedPrice': None,
        'purpose': '1',
        'qrCode': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASIAAAEiAQAAAAB
                   1xeIbAAABjUlEQVR4nO2aQYrjMBBFX40FvVSgD9BHkY8uHyUHGLCWAYXfC8vp
                   ...(9 hidden lines)',
        'spareParts': [
          {'id': '5', 'name': 'name_h6t1q', 'desc':...(len=58731),
          {'id': '7', 'name': 'name_n6b5l', 'desc':...(len=59786),
          {'id': '9', 'name': 'name_af5e3', 'desc':...(len=59786),
          {'id': '10', 'name': 'name_919in',...(len=59787),
          {'id': '11', 'name': 'name_d97p9',...(len=59789),
          {'id': '12', 'name': 'name_m0fs6',...(len=59783),
          {'id': '13', 'name': 'name_ypa4e',...(len=59787),
          {'id': '14', 'name': 'name_c28w6',...(len=59787),
          {'id': '15', 'name': 'name_lcmj1',...(len=59783),
          {'id': '16', 'name': 'name_zkkbo',...(len=59783),
          {'id': '17', 'name': 'name_a8i1x',...(len=59787),
          {'id': '18', 'name': 'name_2o6ft',...(len=59787),
          {'id': '19', 'name': 'name_ls26s',...(len=59787),
          {'id': '20', 'name': 'name_agln5',...(len=59028),
        ],
        'status': '1',
        'yearsOfUse': None,
      },
      'thingRepair': None,
      'totalCosts': 0.0,
    },
  },
  'errors': None,
}

DEBUG    mytest:test_thingMaintanenceFlow.py:33 thing_maintenance_id =46
DEBUG    mytest:GraphqlClient.py:34 http://192.168.1.175:8888/graphql/?updateThingMaintenanceFeedback
DEBUG    mytest:GraphqlClient.py:35 {'Content-Type': 'application/json', 'authorization': 'Token eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJjcmVkZW50aWFscyI6eyJlbXBsb3llZV9pZCI6MSwiaXNfYWRtaW5fIjp0cnVlfSwidXNlciI6eyJpZCI6MSwiY29tcGFueV9pZCI6MSwibmFtZSI6Ilx1N2JhMVx1NzQwNlx1NTQ1OCIsImRlcGFydG1lbnRfaWQiOjEsImNvZGUiOm51bGwsInBob25lIjpudWxsLCJqb2IiOm51bGwsImVtYWlsIjpudWxsLCJhY2NvdW50IjoiYWRtaW4iLCJzdGF0dXMiOiJBQ1RJVkFURUQiLCJyb2xlcyI6bnVsbH0sImV4cCI6MTYwMDMzMzI3NH0.GrQGvQcLNjAI91CPz-s0kH0-0dXEDfbUx7I4IzuHmhE'}
DEBUG    mytest:GraphqlClient.py:36 {
  'input': {
    'endAt': 1600247032773,
    'id': '46',
    'remarks': '接口测试备注',
    'result': '接口测试执行结果',
  },
}

DEBUG    mytest:GraphqlClient.py:39 {
  'data': {
    'updateThingMaintenanceFeedback': {
      '__typename': 'ThingMaintenance',
      'addition': '[]',
      'code': 'BY202009160046',
      'endAt': 1600247032773,
      'id': '46',
      'images': None,
      'laborCosts': None,
      'maintainer': {
        '__typename': 'Employee',
        'account': 'admin',
        'code': None,
        'department': {
          '__typename': 'Department',
          'headcount': 9,
          'id': '1',
          'name': '喜临门家具股份有限公司',
          'parentPath': [],
          'subsidiaries': [],
        },
        'email': None,
        'id': '1',
        'job': None,
        'name': '管理员',
        'phone': None,
        'roles': [
          {'id': '1', 'name': '负责人', 'permissions':...(len=170),
        ],
        'status': 'ACTIVATED',
      },
      'materialCosts': None,
      'otherCosts': None,
      'period': {
        '__typename': 'Period',
        'endAt': None,
        'frequency': None,
        'startAt': 1600247027696,
        'type': 'SINGLE',
      },
      'remarks': '接口测试备注',
      'result': '接口测试执行结果',
      'resultHistory': ['接口测试执行结果'],
      'rule': {
        '__typename': 'ThingMaintenanceRule',
        'addition': '[{"key": "52ffaba0143348f4a7950cd1ab8a34a8", "value":
                     "\\u5355\\u884c\\u6587\\u5b57_mwsd3"}]',
        'code': 'BYFA202009160001',
        'frequency': 'frequency_747je',
        'id': '1',
        'items': [
          {'id': '31dcf6b1-72b0-4a91-a135-0876d6d5317e',...(len=134),
          {'id': '8974129a-a0a3-4f22-b3ee-a282b5d71ff7',...(len=134),
          {'id': '259c6e5f-8606-4fcf-832f-1cd2b8b35f93',...(len=134),
        ],
        'level': '二级保养',
        'name': 'name_fwttg',
        'updatedAt': 1600221631010,
      },
      'sparePartCosts': None,
      'startAt': 1600247027696,
      'status': 'UNDERREVIEW',
      'thing': {
        '__typename': 'Thing',
        'activatedAt': None,
        'addition': None,
        'attachments': None,
        'brand': '1',
        'category': '1',
        'code': 'code_lcdhm',
        'contact': None,
        'depreciationRate': None,
        'desc': None,
        'distributor': None,
        'factory': '1',
        'id': '1',
        'images': None,
        'location': None,
        'manufacturer': None,
        'model': 'model_z6aw5',
        'name': 'name_pz0bx',
        'phone': None,
        'purchasedAt': None,
        'purchasedPrice': None,
        'purpose': '1',
        'qrCode': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASIAAAEiAQAAAAB
                   1xeIbAAABjUlEQVR4nO2aQYrjMBBFX40FvVSgD9BHkY8uHyUHGLCWAYXfC8vp
                   ...(9 hidden lines)',
        'spareParts': [
          {'id': '5', 'name': 'name_h6t1q', 'desc':...(len=58731),
          {'id': '7', 'name': 'name_n6b5l', 'desc':...(len=59786),
          {'id': '9', 'name': 'name_af5e3', 'desc':...(len=59786),
          {'id': '10', 'name': 'name_919in',...(len=59787),
          {'id': '11', 'name': 'name_d97p9',...(len=59789),
          {'id': '12', 'name': 'name_m0fs6',...(len=59783),
          {'id': '13', 'name': 'name_ypa4e',...(len=59787),
          {'id': '14', 'name': 'name_c28w6',...(len=59787),
          {'id': '15', 'name': 'name_lcmj1',...(len=59783),
          {'id': '16', 'name': 'name_zkkbo',...(len=59783),
          {'id': '17', 'name': 'name_a8i1x',...(len=59787),
          {'id': '18', 'name': 'name_2o6ft',...(len=59787),
          {'id': '19', 'name': 'name_ls26s',...(len=59787),
          {'id': '20', 'name': 'name_agln5',...(len=59028),
        ],
        'status': '1',
        'yearsOfUse': None,
      },
      'thingRepair': None,
      'totalCosts': 0.0,
    },
  },
  'errors': None,
}

DEBUG    mytest:AssertMethod.py:17 
jsonpath : '$..status'
get
''UNDERREVIEW'
'
from
result
DEBUG    mytest:AssertMethod.py:18 except UNDERREVIEW
DEBUG    mytest:GraphqlClient.py:34 http://192.168.1.175:8888/graphql/?updateThingMaintenance
DEBUG    mytest:GraphqlClient.py:35 {'Content-Type': 'application/json', 'authorization': 'Token eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJjcmVkZW50aWFscyI6eyJlbXBsb3llZV9pZCI6MSwiaXNfYWRtaW5fIjp0cnVlfSwidXNlciI6eyJpZCI6MSwiY29tcGFueV9pZCI6MSwibmFtZSI6Ilx1N2JhMVx1NzQwNlx1NTQ1OCIsImRlcGFydG1lbnRfaWQiOjEsImNvZGUiOm51bGwsInBob25lIjpudWxsLCJqb2IiOm51bGwsImVtYWlsIjpudWxsLCJhY2NvdW50IjoiYWRtaW4iLCJzdGF0dXMiOiJBQ1RJVkFURUQiLCJyb2xlcyI6bnVsbH0sImV4cCI6MTYwMDMzMzI3NH0.GrQGvQcLNjAI91CPz-s0kH0-0dXEDfbUx7I4IzuHmhE'}
DEBUG    mytest:GraphqlClient.py:36 {
  'input': {
    'id': 46,
    'maintainer': {
      'id': 1,
    },
    'period': {
      'startAt': 1600247039156,
      'type': 'SINGLE',
    },
    'rule': {
      'id': 1,
    },
    'thing': {
      'id': 1,
    },
  },
}

ERROR    sgqlc.endpoint.http:base.py:213 GraphQL query failed with 1 errors
DEBUG    mytest:GraphqlClient.py:39 {
  'data': None,
  'errors': [
    {
      'extensions': {
        'code': 'USER_INPUT_ERROR',
      },
      'locations': [
        {
          'column': 5,
          'line': 2,
        },
      ],
      'message': '处于审核中的工单不允许更新元信息',
      'path': ['updateThingMaintenance'],
    },
  ],
}

DEBUG    mytest:AssertMethod.py:17 
jsonpath : '$..status'
get
'None
'
from
result
DEBUG    mytest:AssertMethod.py:18 except PENDING
DEBUG    mytest:test_thingMaintanenceFlow.py:153 
DEBUG    mytest:AssertMethod.py:28 
jsonpath : '$..errors'
get
'[
  [
    {
      'extensions': {
        'code': 'USER_INPUT_ERROR',
      },
      'locations': [
        {
          'column': 5,
          'line': 2,
        },
      ],
      'message': '处于审核中的工单不允许更新元信息',
      'path': ['updateThingMaintenance'],
    },
  ],
]
'
from
result